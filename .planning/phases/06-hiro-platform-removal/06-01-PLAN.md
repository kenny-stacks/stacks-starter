---
phase: 06-hiro-platform-removal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - front-end/src/constants/devnet.ts
  - front-end/.env.example
  - front-end/.env.local
autonomous: true

must_haves:
  truths:
    - "Devnet configuration uses only localhost:3999"
    - "No NEXT_PUBLIC_DEVNET_HOST conditional logic exists"
    - "No NEXT_PUBLIC_PLATFORM_HIRO_API_KEY references in code"
    - "Application connects to local devnet without platform configuration"
  artifacts:
    - path: "front-end/src/constants/devnet.ts"
      provides: "Simplified devnet configuration"
      contains: "localhost:3999"
      not_contains: "PLATFORM_API_DOMAIN"
    - path: "front-end/.env.example"
      provides: "Clean environment template"
      not_contains: "NEXT_PUBLIC_DEVNET_HOST"
    - path: "front-end/.env.local"
      provides: "Local environment"
      not_contains: "NEXT_PUBLIC_DEVNET_HOST"
  key_links:
    - from: "front-end/src/constants/devnet.ts"
      to: "DEVNET_NETWORK export"
      via: "hardcoded localhost URL"
      pattern: "localhost:3999"
---

<objective>
Remove Hiro Platform configuration from code and environment files

Purpose: Simplify devnet setup to local-only by removing all platform-specific constants, conditional logic, and environment variables. This makes the codebase cleaner and removes dependency on external hosted devnet.

Output: Simplified `devnet.ts` with hardcoded localhost URL, cleaned `.env.example` and `.env.local` without platform variables.
</objective>

<execution_context>
@/Users/kenny/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kenny/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-hiro-platform-removal/06-RESEARCH.md

# Source files to modify
@front-end/src/constants/devnet.ts
@front-end/.env.example
@front-end/.env.local
</context>

<tasks>

<task type="auto">
  <name>Task 1: Simplify devnet.ts to localhost-only</name>
  <files>front-end/src/constants/devnet.ts</files>
  <action>
Rewrite devnet.ts to remove all platform-specific code:

1. Remove `PLATFORM_API_DOMAIN` constant
2. Remove `DEVNET_STACKS_BLOCKCHAIN_API_URL_PLATFORM` constant
3. Remove `DEVNET_STACKS_BLOCKCHAIN_API_URL_LOCAL` constant (merge into single constant)
4. Remove conditional logic checking `NEXT_PUBLIC_DEVNET_HOST`
5. Hardcode `DEVNET_STACKS_BLOCKCHAIN_API_URL` to `http://localhost:3999`

Target implementation:
```typescript
import { STACKS_TESTNET, StacksNetwork } from "@stacks/network";

export const DEVNET_STACKS_BLOCKCHAIN_API_URL = "http://localhost:3999";

export const DEVNET_NETWORK: StacksNetwork = {
  ...STACKS_TESTNET,
  client: { baseUrl: DEVNET_STACKS_BLOCKCHAIN_API_URL },
};
```

Keep the import and DEVNET_NETWORK export structure - only remove platform-specific code.
  </action>
  <verify>
1. Run: `grep -c "PLATFORM" front-end/src/constants/devnet.ts` returns 0
2. Run: `grep -c "DEVNET_HOST" front-end/src/constants/devnet.ts` returns 0
3. Run: `grep -c "localhost:3999" front-end/src/constants/devnet.ts` returns 1
4. Run: `cd front-end && npx tsc --noEmit` passes with no errors
  </verify>
  <done>devnet.ts contains only localhost:3999 URL with no conditional logic or platform references</done>
</task>

<task type="auto">
  <name>Task 2: Clean environment files</name>
  <files>front-end/.env.example, front-end/.env.local</files>
  <action>
Update both environment files to remove platform-specific variables:

**front-end/.env.example** - Remove these lines:
- `NEXT_PUBLIC_DEVNET_HOST=platform` (line with comment above it)
- `NEXT_PUBLIC_PLATFORM_HIRO_API_KEY=XXXX`

Keep these lines:
- `NEXT_PUBLIC_STACKS_NETWORK=devnet`
- `NEXT_PUBLIC_CONTRACT_DEPLOYER_TESTNET_ADDRESS=XXXX`
- `NEXT_PUBLIC_CONTRACT_DEPLOYER_MAINNET_ADDRESS=XXXX`

Add a comment explaining network options.

Target .env.example:
```
# Network configuration (devnet, testnet, or mainnet)
NEXT_PUBLIC_STACKS_NETWORK=devnet

# Contract deployer addresses (set when deploying to testnet/mainnet)
NEXT_PUBLIC_CONTRACT_DEPLOYER_TESTNET_ADDRESS=XXXX
NEXT_PUBLIC_CONTRACT_DEPLOYER_MAINNET_ADDRESS=XXXX
```

**front-end/.env.local** - Remove the `NEXT_PUBLIC_DEVNET_HOST=local` line entirely. Keep only `NEXT_PUBLIC_STACKS_NETWORK=devnet` (if present) or leave file minimal.

Check current .env.local content first - it may have other settings to preserve.
  </action>
  <verify>
1. Run: `grep -c "DEVNET_HOST" front-end/.env.example` returns 0
2. Run: `grep -c "PLATFORM_HIRO" front-end/.env.example` returns 0
3. Run: `grep -c "DEVNET_HOST" front-end/.env.local` returns 0
4. Run: `grep "STACKS_NETWORK" front-end/.env.example` shows the network line exists
  </verify>
  <done>Environment files contain no platform-specific variables, only network and deployer address configuration</done>
</task>

<task type="auto">
  <name>Task 3: Verify application still builds</name>
  <files>front-end/</files>
  <action>
Verify the changes don't break the build:

1. Run TypeScript compilation check
2. Run Next.js build (or at minimum lint check)
3. Verify no references to removed environment variables remain in codebase

Search for any remaining references:
- `NEXT_PUBLIC_DEVNET_HOST` in any .ts/.tsx files
- `NEXT_PUBLIC_PLATFORM_HIRO_API_KEY` in any .ts/.tsx files
- `PLATFORM_API_DOMAIN` anywhere

If any references found, they need to be removed.
  </action>
  <verify>
1. Run: `cd front-end && npx tsc --noEmit` - no errors
2. Run: `cd front-end && pnpm lint` - no errors related to removed code
3. Run: `grep -r "NEXT_PUBLIC_DEVNET_HOST\|NEXT_PUBLIC_PLATFORM_HIRO_API_KEY" front-end/src/ --include="*.ts" --include="*.tsx"` returns empty
  </verify>
  <done>Application builds successfully with no references to removed platform configuration</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **No platform references in code:**
   ```bash
   grep -r "PLATFORM_HIRO\|DEVNET_HOST\|api\.platform" front-end/src/ --include="*.ts" --include="*.tsx"
   ```
   Should return empty.

2. **Correct devnet URL:**
   ```bash
   grep "localhost:3999" front-end/src/constants/devnet.ts
   ```
   Should show the hardcoded URL.

3. **Clean environment files:**
   ```bash
   grep -E "PLATFORM|DEVNET_HOST" front-end/.env.example front-end/.env.local
   ```
   Should return empty.

4. **Build passes:**
   ```bash
   cd front-end && npx tsc --noEmit
   ```
   Should complete with no errors.
</verification>

<success_criteria>
- CODE-01: Hiro Platform API constants removed from devnet.ts
- CODE-02: NEXT_PUBLIC_DEVNET_HOST conditional logic removed
- CODE-03: NEXT_PUBLIC_PLATFORM_HIRO_API_KEY usage removed
- CODE-04: Devnet configuration simplified to localhost:3999 only
- Application builds without errors
- No remaining platform references in source code
</success_criteria>

<output>
After completion, create `.planning/phases/06-hiro-platform-removal/06-01-SUMMARY.md`
</output>

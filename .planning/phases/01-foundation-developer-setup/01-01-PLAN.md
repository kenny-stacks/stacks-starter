---
phase: 01-foundation-developer-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - front-end/package.json
  - front-end/pnpm-lock.yaml
autonomous: true

must_haves:
  truths:
    - "Developer runs `pnpm install` successfully without peer dependency errors"
    - "No package-lock.json exists in front-end directory"
    - "pnpm-lock.yaml exists and is committed"
  artifacts:
    - path: "front-end/pnpm-lock.yaml"
      provides: "pnpm dependency lock file"
      min_lines: 100
  key_links:
    - from: "front-end/package.json"
      to: "front-end/pnpm-lock.yaml"
      via: "pnpm install creates lock file"
      pattern: "lockfileVersion"
---

<objective>
Migrate from npm to pnpm as the package manager for the front-end project.

Purpose: pnpm handles React 19 peer dependency conflicts natively without requiring --legacy-peer-deps flags. It is also 3-4x faster than npm for installs and uses hard links to save disk space. This establishes a clean foundation for all subsequent dependency installations.

Output: Working pnpm setup with pnpm-lock.yaml, npm artifacts removed.
</objective>

<execution_context>
@/Users/kenny/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kenny/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-developer-setup/01-RESEARCH.md

# Existing files to modify
@front-end/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove npm artifacts and prepare for pnpm</name>
  <files>
    front-end/package-lock.json (delete)
    front-end/node_modules (delete)
    package-lock.json (delete - root level)
  </files>
  <action>
    1. Delete front-end/package-lock.json if exists
    2. Delete front-end/node_modules directory if exists
    3. Delete root-level package-lock.json if exists (there's one at project root)
    4. Verify no package-lock.json files remain in project

    Note: The root package.json appears to be a workspace config. Focus on front-end/ directory for this starter kit.
  </action>
  <verify>
    Run: `find /Users/kenny/Code/stacks-starter -name "package-lock.json" -type f`
    Expected: No output (no package-lock.json files exist)
  </verify>
  <done>All npm lock files and node_modules removed from project</done>
</task>

<task type="auto">
  <name>Task 2: Install dependencies with pnpm</name>
  <files>
    front-end/pnpm-lock.yaml (create)
    front-end/node_modules (recreate)
  </files>
  <action>
    1. Navigate to front-end directory
    2. Run `pnpm install` to install all dependencies
    3. Verify install completes without peer dependency errors (React 19 + Chakra should install cleanly with pnpm)
    4. Verify pnpm-lock.yaml was created
    5. Test that existing dev server starts: `pnpm dev` (verify app runs on localhost:3000)
    6. Stop dev server after verification

    Expected outcome: All dependencies installed, dev server starts (may show Chakra UI app - that's fine, we remove Chakra in later plan).
  </action>
  <verify>
    Run: `cd /Users/kenny/Code/stacks-starter/front-end && pnpm install && ls pnpm-lock.yaml`
    Expected: Install succeeds, pnpm-lock.yaml file exists

    Run: `cd /Users/kenny/Code/stacks-starter/front-end && timeout 10 pnpm dev || true`
    Expected: Server starts on localhost:3000 (timeout will stop it)
  </verify>
  <done>pnpm-lock.yaml exists, `pnpm install` succeeds, `pnpm dev` starts the app</done>
</task>

</tasks>

<verification>
After both tasks complete:

1. No package-lock.json files exist anywhere in project:
   ```bash
   find . -name "package-lock.json" -type f | wc -l
   # Expected: 0
   ```

2. pnpm-lock.yaml exists in front-end:
   ```bash
   ls front-end/pnpm-lock.yaml
   # Expected: file exists
   ```

3. pnpm install succeeds:
   ```bash
   cd front-end && pnpm install
   # Expected: success, no peer dependency errors
   ```

4. Dev server starts:
   ```bash
   cd front-end && pnpm dev &
   sleep 5
   curl -s localhost:3000 | head -5
   # Expected: HTML response
   ```
</verification>

<success_criteria>
- npm artifacts (package-lock.json, node_modules) removed
- pnpm-lock.yaml created and valid
- `pnpm install` succeeds without manual flags
- `pnpm dev` starts the development server
- Project ready for subsequent dependency installations
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-developer-setup/01-01-SUMMARY.md`
</output>

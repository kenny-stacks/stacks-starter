---
phase: 01-foundation-developer-setup
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - front-end/eslint.config.mjs
  - front-end/.prettierrc
  - front-end/vitest.config.mts
  - front-end/vitest.setup.ts
  - front-end/package.json
  - front-end/src/lib/__tests__/example.test.ts
autonomous: true

must_haves:
  truths:
    - "ESLint catches Tailwind dynamic class construction errors"
    - "`pnpm test` runs Vitest and shows passing tests"
    - "Prettier formats files with Tailwind class sorting"
  artifacts:
    - path: "front-end/eslint.config.mjs"
      provides: "ESLint 9 flat config with Tailwind plugin"
      contains: "eslint-plugin-tailwindcss"
    - path: "front-end/.prettierrc"
      provides: "Prettier config with Tailwind plugin"
      contains: "prettier-plugin-tailwindcss"
    - path: "front-end/vitest.config.mts"
      provides: "Vitest configuration for Next.js"
      contains: "defineConfig"
    - path: "front-end/vitest.setup.ts"
      provides: "Vitest setup with testing-library matchers"
      contains: "@testing-library/jest-dom"
    - path: "front-end/src/lib/__tests__/example.test.ts"
      provides: "Example test demonstrating Vitest works"
      contains: "describe"
  key_links:
    - from: "front-end/package.json"
      to: "front-end/vitest.config.mts"
      via: "test script runs vitest"
      pattern: '"test".*vitest'
    - from: "front-end/eslint.config.mjs"
      to: "front-end/tailwind.config.ts"
      via: "Tailwind plugin reads config for class validation"
      pattern: "tailwindcss"
---

<objective>
Configure ESLint with Tailwind plugin for dynamic class detection, Prettier with Tailwind class sorting, and Vitest for testing.

Purpose: ESLint's Tailwind plugin catches dynamic class construction errors at development time (a common pitfall that breaks production builds). Prettier with Tailwind plugin enforces consistent class ordering. Vitest provides fast testing for contract utilities and React components. Together these tools establish a solid developer experience foundation.

Output: Working ESLint, Prettier, and Vitest configurations with example test passing.
</objective>

<execution_context>
@/Users/kenny/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kenny/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-developer-setup/01-RESEARCH.md

# Reference implementation patterns from research
# Pattern 5: ESLint 9 Flat Config with Tailwind Plugin
# Pattern 6: Vitest Configuration for Next.js 15
# Pattern 7: Prettier with Tailwind Class Sorting

@front-end/eslint.config.mjs
@front-end/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure ESLint with Tailwind plugin</name>
  <files>
    front-end/eslint.config.mjs (modify)
    front-end/package.json (add dev dependency)
  </files>
  <action>
    1. Navigate to front-end directory
    2. Install eslint-plugin-tailwindcss:
       ```bash
       pnpm add -D eslint-plugin-tailwindcss
       ```

    3. Update eslint.config.mjs to include Tailwind plugin. The file already has ESLint 9 flat config structure. Add:
       - Import tailwind from 'eslint-plugin-tailwindcss'
       - Spread tailwind.configs['flat/recommended']
       - Add rules for Tailwind validation:
         - 'tailwindcss/classnames-order': 'warn' (consistent class ordering)
         - 'tailwindcss/no-custom-classname': 'warn' (catches dynamic class construction)
         - 'tailwindcss/no-contradicting-classname': 'error' (prevents p-2 p-3 conflicts)

    4. Keep existing next/core-web-vitals and next/typescript configs

    5. Add ignores for build directories: ['.next/**', 'out/**', 'node_modules/**']

    Final eslint.config.mjs should look like:
    ```javascript
    import { dirname } from "path";
    import { fileURLToPath } from "url";
    import { FlatCompat } from "@eslint/eslintrc";
    import tailwind from "eslint-plugin-tailwindcss";

    const __filename = fileURLToPath(import.meta.url);
    const __dirname = dirname(__filename);

    const compat = new FlatCompat({
      baseDirectory: __dirname,
    });

    const eslintConfig = [
      ...compat.extends("next/core-web-vitals", "next/typescript"),
      ...tailwind.configs["flat/recommended"],
      {
        ignores: [".next/**", "out/**", "node_modules/**"],
      },
      {
        rules: {
          "tailwindcss/classnames-order": "warn",
          "tailwindcss/no-custom-classname": "warn",
          "tailwindcss/no-contradicting-classname": "error",
        },
      },
    ];

    export default eslintConfig;
    ```
  </action>
  <verify>
    Run: `cd /Users/kenny/Code/stacks-starter/front-end && pnpm lint`
    Expected: Lint runs without configuration errors (may have warnings about existing code - that's expected)

    Run: `grep "eslint-plugin-tailwindcss" /Users/kenny/Code/stacks-starter/front-end/package.json`
    Expected: Package listed in devDependencies
  </verify>
  <done>ESLint configured with Tailwind plugin, lint command runs successfully</done>
</task>

<task type="auto">
  <name>Task 2: Configure Prettier with Tailwind class sorting</name>
  <files>
    front-end/.prettierrc (create)
    front-end/package.json (add scripts and dependencies)
  </files>
  <action>
    1. Navigate to front-end directory
    2. Install Prettier and Tailwind plugin:
       ```bash
       pnpm add -D prettier prettier-plugin-tailwindcss
       ```

    3. Create .prettierrc with Tailwind plugin configuration:
       ```json
       {
         "semi": true,
         "singleQuote": false,
         "tabWidth": 2,
         "trailingComma": "es5",
         "plugins": ["prettier-plugin-tailwindcss"]
       }
       ```

       IMPORTANT: prettier-plugin-tailwindcss must be LAST in plugins array if other plugins added later.

    4. Add format scripts to package.json:
       - "format": "prettier --write ."
       - "format:check": "prettier --check ."

    5. Verify Prettier works:
       ```bash
       pnpm format:check
       ```
       (May show files need formatting - that's OK, confirms it runs)
  </action>
  <verify>
    Run: `cat /Users/kenny/Code/stacks-starter/front-end/.prettierrc`
    Expected: JSON config with prettier-plugin-tailwindcss in plugins

    Run: `cd /Users/kenny/Code/stacks-starter/front-end && pnpm format:check || true`
    Expected: Command runs (exit code 1 if files need formatting is OK)
  </verify>
  <done>Prettier configured with Tailwind class sorting plugin</done>
</task>

<task type="auto">
  <name>Task 3: Configure Vitest for testing</name>
  <files>
    front-end/vitest.config.mts (create)
    front-end/vitest.setup.ts (create)
    front-end/package.json (add test script and dependencies)
    front-end/src/lib/__tests__/example.test.ts (create)
  </files>
  <action>
    1. Navigate to front-end directory
    2. Install Vitest and testing dependencies:
       ```bash
       pnpm add -D vitest @vitejs/plugin-react jsdom @testing-library/react @testing-library/dom @testing-library/jest-dom vite-tsconfig-paths
       ```

    3. Create vitest.config.mts:
       ```typescript
       import { defineConfig } from 'vitest/config'
       import react from '@vitejs/plugin-react'
       import tsconfigPaths from 'vite-tsconfig-paths'

       export default defineConfig({
         plugins: [
           react(),
           tsconfigPaths(),
         ],
         test: {
           environment: 'jsdom',
           globals: true,
           setupFiles: './vitest.setup.ts',
         },
       })
       ```

    4. Create vitest.setup.ts:
       ```typescript
       import '@testing-library/jest-dom'
       ```

    5. Add test scripts to package.json:
       - "test": "vitest"
       - "test:run": "vitest run"
       - "test:coverage": "vitest run --coverage"

    6. Create example test at src/lib/__tests__/example.test.ts:
       ```typescript
       import { describe, it, expect } from 'vitest'

       describe('Example Test Suite', () => {
         it('should pass a basic assertion', () => {
           expect(1 + 1).toBe(2)
         })

         it('should demonstrate Vitest works with the project', () => {
           const greeting = 'Hello Stacks'
           expect(greeting).toContain('Stacks')
         })
       })
       ```

    7. Create the __tests__ directory if it doesn't exist:
       ```bash
       mkdir -p src/lib/__tests__
       ```

    8. Run tests to verify setup:
       ```bash
       pnpm test:run
       ```
  </action>
  <verify>
    Run: `cd /Users/kenny/Code/stacks-starter/front-end && pnpm test:run`
    Expected: "2 passed" or similar success output

    Run: `cat /Users/kenny/Code/stacks-starter/front-end/vitest.config.mts | grep -E "jsdom|globals"`
    Expected: environment: 'jsdom' and globals: true present
  </verify>
  <done>Vitest configured, example tests pass, `pnpm test` works</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. ESLint runs with Tailwind rules:
   ```bash
   cd front-end && pnpm lint
   # Expected: Runs without config errors
   ```

2. Prettier configured:
   ```bash
   cat front-end/.prettierrc | grep tailwindcss
   # Expected: Shows tailwind plugin
   ```

3. Tests pass:
   ```bash
   cd front-end && pnpm test:run
   # Expected: All tests pass
   ```

4. All tools installed:
   ```bash
   grep -E "vitest|prettier|eslint-plugin-tailwindcss" front-end/package.json
   # Expected: All three packages present
   ```
</verification>

<success_criteria>
- ESLint configured with Tailwind plugin (FOUN-03 complete)
- 'tailwindcss/no-custom-classname' rule active to catch dynamic class construction
- Prettier configured with Tailwind class sorting
- Vitest configured and running (DEVX-06 complete)
- Example test passes with `pnpm test:run`
- Format and lint scripts available in package.json
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-developer-setup/01-03-SUMMARY.md`
</output>
